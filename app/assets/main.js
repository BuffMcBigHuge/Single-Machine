function composeController(e,t,o){function r(e){"use strict";var t,o;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0];for(var r=[],n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Blob([new Uint8Array(r)],{type:o})}var n=this,a=function(a){if(!n.project)return void e.error("There was an error.");var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-picture-o"/>',tooltip:"Insert an Image",click:function(){t.showModal({templateUrl:"../partials/uploadImageModal.html",controller:"ModalController",inputs:{data:{type:"uploadImageModal"}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t);if("object"!=typeof i)return void e.error("There was an error.");n.imageLoading=!0,o.uploadProject("image",i,n.project).then(function(e){a.invoke("editor.insertImage",e.data.data,function(e){e.css("width","100%"),e.css("height","auto")}),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()},i=function(a){if(!n.submission)return void e.error("There was an error.");var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-picture-o"/>',tooltip:"Insert an Image",click:function(){a.invoke("editor.saveRange"),t.showModal({templateUrl:"../partials/uploadImageModal.html",controller:"ModalController",inputs:{data:{type:"uploadImageModal"}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t);if("object"!=typeof i)return void e.error("There was an error.");n.imageLoading=!0,o.uploadSubmission("image",i,n.submission).then(function(e){a.invoke("editor.restoreRange"),a.invoke("editor.focus"),a.invoke("editor.insertImage",e.data.data,function(e){e.css("width","100%"),e.css("height","auto")}),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()},s=function(a){if(!n.project)return void e.error("There was an error.");var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-file-pdf-o"/>',tooltip:"Insert a PDF",click:function(){a.invoke("editor.saveRange"),t.showModal({templateUrl:"../partials/modal/uploadPDFModal.html",controller:"ModalController",inputs:{data:{type:"uploadPDFModal"}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t.pdf),s=r(t.image);t.filename;if("object"!=typeof i||"object"!=typeof s)return void e.error("There was an error.");n.imageLoading=!0,o.uploadProject("pdf",i,n.project).then(function(t){o.uploadProject("image",s,n.project).then(function(e){var o=$('<a target="_blank" href="'+t.data.data+'"><img src="'+e.data.data+'" /></a>');a.invoke("editor.restoreRange"),a.invoke("editor.focus"),a.invoke("editor.insertNode",o[0]),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()},l=function(a){if(!n.submission)return void e.error("There was an error.");var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-file-pdf-o"/>',tooltip:"Insert a PDF",click:function(){a.invoke("editor.saveRange"),t.showModal({templateUrl:"../partials/modal/uploadPDFModal.html",controller:"ModalController",inputs:{data:{type:"uploadPDFModal"}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t.pdf),s=r(t.image);t.filename;if("object"!=typeof i||"object"!=typeof s)return void e.error("There was an error.");n.imageLoading=!0,o.uploadSubmission("pdf",i,n.submission).then(function(t){o.uploadSubmission("image",s,n.submission).then(function(e){var o=$('<a target="_blank" href="'+t.data.data+'"><img src="'+e.data.data+'" /></a>');a.invoke("editor.restoreRange"),a.invoke("editor.focus"),a.invoke("editor.insertNode",o[0]),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()};n.summernote={},n.summernote.editor=null,n.summernote.edtiable=null,n.summernote.options=[{toolbar:[["style",["bold","italic"]],["insert",["link"]],["para",["paragraph","ul","ol"]],["custom",["insertImage","insertPdf"]]],buttons:{insertImage:a,insertPdf:s}},{toolbar:[["style",["bold","italic"]],["insert",["link"]],["para",["paragraph","ul","ol"]],["custom",["insertImage","insertPdf"]]],buttons:{insertImage:i,insertPdf:l}}],n.onPaste=function(e,t){var o=(e.originalEvent.clipboardData.getData("text/html"),e.originalEvent.clipboardData.getData("text"));e.preventDefault();var r=".summernote"+t+n.index;$(r).summernote("editor.saveRange"),$(r).summernote("editor.restoreRange"),$(r).summernote("editor.focus"),$(r).summernote("editor.insertText",o)},n.setDisabled=function(e){$(".summernote"+e+n.index).summernote("disable")}}function dashboardGridViewController(e,t,o,r,n,a){var i=this;i.projects=[],i.submissions=[],i.strengths=[],i.totalSections=0,i.totalDoneSections=0,i.totalPercentage=0,i.data={},i.pendingNum=0,i.progressNum=0,i.publishedNum=0,i.data.program={},i.data.program.projects=[],i.data.submissions=[],i.ids=[],i.editProject=function(e){t.path("/submission/edit/"+e)},i.archiveProgram=function(){a.success("Coming soon!")},i.init=function(){i.user=JSON.parse(o.getUser()),n.getProgram(i.program._id).then(function(t){i.program=t.data,i.data.program.projects=angular.copy(i.program.projects),r.each(i.data.program.projects,function(e){e.sections=e.data.length,e.doneSections=0,e.percentage=0,i.totalSections+=e.sections,i.strengths=i.strengths.concat(e.strengths)}),i.strengths=r.uniq(i.strengths,!1,function(e){return e.value}),e.getMySubmissions().then(function(e){i.submissions=e.data,i.data.submissions=angular.copy(i.submissions),r.each(i.data.submissions,function(e){if(e.data){var t=e.data.length,o=0;r.each(e.data,function(e){e.hasOwnProperty("userInput")&&o++});var n=o/t;e.sections=t,e.doneSections=o,e.percentage=n,i.totalDoneSections+=o,i.totalPercentage=Math.round(i.totalDoneSections/i.totalSections*100)}}),0==i.data.submissions.length?r.each(i.data.program.projects,function(e){i.pendingNum++,e.pending=!0,i.progressNum=0,i.completeNum=0}):(r.each(i.data.submissions,function(e){i.ids.push(e.projectId)}),r.each(i.data.program.projects,function(e){r.each(i.data.submissions,function(t){i.ids.indexOf(e._id)>-1?e._id==t.projectId&&(e.published=t.published,e.percentage=t.percentage,1==e.published?(e.pending=!1,e.progress=!1):(e.percentage<1&&(e.progress=!0,e.pending=!1),1==e.percentage&&(e.progress=!1,e.pending=!1))):e.pending=!0}),1==e.progress?i.progressNum++:1==e.published?i.publishedNum++:1==e.pending&&i.pendingNum++}))})})}()}function dashboardSubmissionViewController(e,t){var o=this;o.init=function(){o.user=JSON.parse(t.getUser()),o.submission&&(o.sections=o.submission.data.length,o.doneSections=0,e.each(o.submission.data,function(e){e.hasOwnProperty("userInput")&&o.doneSections++}),o.percentage=o.doneSections/o.sections*100)}()}function programCardController(e,t,o,r,n){var a=this;a.user={},a.isMine=!1,a.deleteProgram=function(){a["delete"]=!0,setTimeout(function(){e.deleteProgram(a.program).then(function(e){t.success("Program Deleted")})["catch"](function(e){t.error(e.data.message,e.status)})},200)},a.editProgram=function(){n.path("/programs/"+a.program._id)},a.programClick=function(){a.program.demo||n.path("/program/"+a.program._id)},a.getUser=function(){a.user=JSON.parse(r.getUser());var e=o.map(a.program.creatorId,function(e){return"object"==typeof e?e._id:e});a.program.creatorId&&e.indexOf(a.user._id)>=0&&(a.isMine=!0)}()}function projectCardController(e,t,o,r,n){}function projectGridViewController(e,t,o,r,n){var a=this;a.user={},a.isMine=!1,a.deleteProject=function(){a["delete"]=!0,setTimeout(function(){e.deleteProject(a.project).then(function(e){t.success("Project Deleted")})["catch"](function(e){t.error(e.data.message,e.status)})},200)},a.editProject=function(){n.path("/project/edit/"+a.project._id)},a.getUser=function(){a.user=JSON.parse(o.getUser()),a.project.creatorId&&a.project.creatorId.indexOf(a.user._id)>-1&&(a.isMine=!0)}()}function mainController(e,t,o){function r(e){"use strict";var t,o;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0];for(var r=[],n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Blob([new Uint8Array(r)],{type:o})}var n=this,a=function(a){var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-picture-o"/>',tooltip:"Insert an Image",click:function(){t.showModal({templateUrl:"../partials/uploadImageModal.html",controller:"ModalController",inputs:{data:{type:"uploadImageModal",height:500,width:700}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t);if("object"!=typeof i)return void e.error("There was an error.");n.imageLoading=!0,o.uploadProject("image",i,n.project).then(function(e){a.invoke("editor.insertImage",e.data.data,function(e){e.css("width","100%"),e.css("height","auto")}),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()},i=function(a){var i=$.summernote.ui,s=i.button({contents:'<i class="fa fa-file-pdf-o"/>',tooltip:"Insert a PDF",click:function(){t.showModal({templateUrl:"../partials/modal/uploadPDFModal.html",controller:"ModalController",inputs:{data:{type:"uploadPDFModal"}}}).then(function(t){t.element.modal(),t.close.then(function(t){if("Cancel"!=t){var i=r(t.pdf),s=r(t.image);t.filename;if("object"!=typeof i||"object"!=typeof s)return void e.error("There was an error.");n.imageLoading=!0,o.uploadProject("pdf",i,n.project).then(function(t){o.uploadProject("image",s,n.project).then(function(e){var o=$('<a target="_blank" href="'+t.data.data+'"><img src="'+e.data.data+'" /></a>');a.invoke("editor.insertNode",o[0]),n.imageLoading=!1})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})})["catch"](function(t){n.imageLoading=!1,e.error("There was an error.")})}})})}});return s.render()};n.summernote={},n.summernote.editor=null,n.summernote.edtiable=null,n.summernote.options=[{toolbar:[["style",["bold","italic"]],["insert",["link"]],["para",["paragraph","ul","ol"]]]},{toolbar:[["style",["bold","italic"]],["insert",["link"]],["para",["paragraph","ul","ol"]],["para",["paragraph","ul","ol"]],["custom",["insertImage","insertPdf"]]],buttons:{insertImage:a,insertPdf:i}}],n.onPaste=function(e,t){var o=(e.originalEvent.clipboardData.getData("text/html"),e.originalEvent.clipboardData.getData("text"));e.preventDefault();var r=".summernote"+t+n.index;$(r).summernote("editor.saveRange"),$(r).summernote("editor.restoreRange"),$(r).summernote("editor.focus"),$(r).summernote("editor.insertText",o)},n.setDisabled=function(e){$(".summernote"+e+n.index).summernote("disable")}}function submissionGridViewController(e,t,o,r,n){}function submissionPopUpViewController(e,t,o,r,n,a){var i=this;i.popUp=function(){}}function submissionPortfolioCardController(e,t,o,r){var n=this;n.canReview=!1,n.selectedCompose=0,e.each(n.submission.data,function(e){e.editMode=!1,e.isCreator=!1}),n.switchCompose=function(e){n.view="compose"+e+"_"+n.submission._id,$(".white-button-3").removeClass("selected"),$("#"+n.view).addClass("selected"),n.selectedCompose=e},n.dismiss=function(){$("#submission"+n.submission._id).modal("toggle")},n.submitReview=function(){n.submission.reviewerId?o.error("Removing Reviews Not Implemented"):(n.submission.reviewerId=n.user._id,t.updateSubmission(n.submission).then(function(e){o.success("Submission Reviewed"),n.submission.reviewerId=angular.copy(n.user)})["catch"](function(e){o.error(e.data.message,e.status)}))},n.switchCompose(n.selectedCompose),n.getUser=function(){n.user=JSON.parse(r.getUser()),n.user&&n.user.isBusiness&&n.user.displayName&&n.user.displayName.firstName&&n.user.displayName.lastName&&(n.canReview=!0)}()}composeController.$inject=["toastr","ModalService","UploadService"],dashboardGridViewController.$inject=["SubmissionService","$location","localStorage","_","ProgramService","toastr"],dashboardSubmissionViewController.$inject=["_","localStorage"],programCardController.$inject=["ProgramService","toastr","_","localStorage","$location"],projectCardController.$inject=["ProjectService","toastr","localStorage","$scope","$location"],projectGridViewController.$inject=["ProjectService","toastr","localStorage","$scope","$location"],mainController.$inject=["toastr","ModalService","UploadService"],submissionGridViewController.$inject=["ProjectService","toastr","localStorage","$scope","$location"],submissionPopUpViewController.$inject=["ProjectService","toastr","localStorage","ModalService","$scope","$location"],submissionPortfolioCardController.$inject=["_","SubmissionService","toastr","localStorage"],angular.module("MyApp",["ngResource","ngMessages","ngFileUpload","toastr","ui.router","ui.bootstrap","satellizer","angularModalService","angular-velocity","underscore","xeditable","vcRecaptcha","reTree","ng.deviceDetector"]).config(["$stateProvider","$urlRouterProvider","$authProvider","$httpProvider","toastrConfig","$compileProvider","$locationProvider",function(e,t,o,r,n,a,i){function s(e,t,o){var r=e.defer();return o.isAuthenticated()?t.path("/portfolio"):t.path("/signup"),r.promise}function l(e,t){var o=e.defer();return t.isAuthenticated()?o.reject():o.resolve(),o.promise}function u(e,t,o){var r=e.defer();return o.isAuthenticated()?r.resolve():t.path("/"),r.promise}s.$inject=["$q","$location","$auth"],l.$inject=["$q","$auth"],u.$inject=["$q","$location","$auth"],e.state("main",{url:"/",resolve:{resolveHome:s}}).state("signup",{url:"/signup",templateUrl:"/partials/signup.html",controller:"SignupCtrl",resolve:{skipIfLoggedIn:l}}).state("validate",{url:"/validate",templateUrl:"/partials/validate.html",controller:"ValidateCtrl",resolve:{loginRequired:u}}).state("user-list",{url:"/list",templateUrl:"/partials/userList.html",controller:"ListCtrl",resolve:{loginRequired:u}}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl",resolve:{loginRequired:u}}).state("portfolio",{url:"/portfolio",templateUrl:"/partials/portfolio.html",controller:"PortfolioCtrl",resolve:{loginRequired:u}}).state("user-portfolio",{url:"/user/:userId",templateUrl:"/partials/userPortfolio.html",controller:"UserPortfolioCtrl"}).state("about",{url:"/about",templateUrl:"/partials/about.html",controller:"StaticCtrl"}).state("request-password-reset",{url:"/request-password-reset",templateUrl:"/partials/requestPasswordReset.html",controller:"RequestPasswordResetCtrl"}).state("reset-password",{url:"/reset-password/:token",templateUrl:"/partials/resetPassword.html",controller:"ResetPasswordCtrl"}),r.defaults.withCredentials=!0,t.otherwise("/"),angular.extend(n,{containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,preventOpenDuplicates:!0,messageClass:"toast-message",newestOnTop:!0,positionClass:"toast-bottom-center",timeOut:3e3,titleClass:"toast-title",toastClass:"toast velocity-enter-transition-FadeIn velocity-leave-transition-slideDownBigOut"}),a.debugInfoEnabled(!1),i.html5Mode({enabled:!0,requireBase:!1})}]).run(["editableOptions","$rootScope","$location","$window","localStorage",function(e){e.theme="bs3"}]),angular.module("MyApp").controller("InitCtrl",["$scope","$auth","$http","UserService","toastr","$location","localStorage","_","$rootScope","$document","$timeout","$window","$anchorScroll","deviceDetector",function(e,t,o,r,n,a,i,s,l,u,c,d,p,m){e.isLoaded=function(){return!0},e.deviceDetectorValue=m,e.validate=["/validate","/logout","/login","/portfolio/","/reset-password/"],e.noFooterArray=["/signup"],e.isAuthenticated=function(){return t.isAuthenticated()},e.isValid=function(){return e.isAuthenticated()&&"undefined"!=typeof e.user?e.user.isValid||!1:!1},l.$on("$locationChangeSuccess",function(){c(function(){p("top-nav")})}),l.$on("$locationChangeStart",function(t,o,l){var u=!1;o.toLowerCase().indexOf("/validate")>=0&&(u=!0),e.noFooter=!1,s.each(e.noFooterArray,function(t){o.toLowerCase().indexOf(t)>=0&&(e.noFooter=!0)}),!e.isValid()&&e.isAuthenticated()&&0==u&&(e.loading=!0,r.getProfile().then(function(t){var r=t.data;e.user=r,i.setUser(r),e.isAuthenticated()&&e.isValid()&&"undefined"!=typeof o||(n.success("Please Validate"),a.path("/validate")),e.loading=!1})["catch"](function(t){location.path("/logout"),e.loading=!1}))}),$.fn.extend({animateCss:function(e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(this).addClass("animated "+e).one(t,function(){$(this).removeClass("animated "+e)})}})}]),angular.module("MyApp").controller("ListCtrl",["$scope","$auth","$http","UserService","toastr","$state",function(e,t,o,r,n,a){e.userList=[],e.loading=!0,e.goToProfile=function(e){a.go("other-profile",{userId:e})},e.getAllUsers=function(){r.getAllProfiles().then(function(t){e.userList=t.data,e.loading=!1})["catch"](function(e){n.error(e.data.message,e.status)})},e.init=function(){e.getAllUsers()}()}]),angular.module("MyApp").controller("LogoutCtrl",["$location","$auth","toastr","$window",function(e,t,o,r){t.isAuthenticated()&&t.logout().then(function(){r.localStorage.clear(),o.success("Logged Out"),e.path("/"),r.location.reload()})}]),angular.module("MyApp").controller("ModalController",["$scope","close","data","toastr","UploadService","ModalService","_","$anchorScroll","$timeout","$window",function(e,t,o,r,n,a,i,s,l,u){e.data=o,e.data||(e.data={}),e.imageLoading=!1,e.myImage=null,e.myImageFile=null,e.myCroppedImage=null,e.cropper=null,e.flipX=!1,e.flipY=!1,e.data.width&&e.data.height?(e.data.aspectRatio=e.data.width/e.data.height,e.data.imageOptions={width:e.data.width,height:e.data.height}):(e.data.aspectRatio=Number.NaN,e.data.imageOptions={}),e.options={aspectRatio:e.data.aspectRatio,responsive:!0,checkOrientation:!0,center:!0,checkCrossOrigin:!0,guides:!0,highlight:!1,autoCrop:!0,autoCropArea:1,toggleDragModeOnDblclick:!1,movable:!1,rotatable:!0,scalable:!0,zoomable:!1,zoomOnWheel:!1,cropBoxMovable:!0,cropBoxResizable:!0},e.scaleY=function(){e.flipY?e.cropper.scaleY(1):e.cropper.scaleY(-1),e.flipY=!e.flipY},e.scaleX=function(){e.flipX?e.cropper.scaleX(1):e.cropper.scaleX(-1),e.flipX=!e.flipX},e.handleFileSelect=function(t){if(e.imageLoading=!0,"undefined"!=typeof t&&t){var o=new FileReader;o.onload=function(t){e.$apply(function(e){e.myImage=t.target.result,l(function(){var t=document.getElementById("image");e.cropper&&e.cropper.replace(e.myImage,!1),e.cropper||(e.cropper=new Cropper(t,e.options)),e.imageLoading=!1,l(function(){$(window).trigger("resize"),window.dispatchEvent(new Event("resize")),e.cropper.reset()},200)},400)})},o.readAsDataURL(t)}else e.myCroppedImage=null,e.myImage=null,e.myImageFile=null,e.imageLoading=!1},e.getImage=function(){e.myCroppedImage=e.cropper.getCroppedCanvas(e.data.imageOptions).toDataURL(),e.close(e.myCroppedImage)},e.close=function(e){t(e,500)},e.init=function(){s("top-nav")}()}]),angular.module("MyApp").controller("PortfolioCtrl",["$scope","$state","$auth","toastr","UploadService","UserService","localStorage","_","$location","ModalService","$timeout","$window","$interval","$anchorScroll",function(e,t,o,r,n,a,i,s,l,u,c,d,p,m){function g(e){"use strict";var t,o;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0];for(var r=[],n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Blob([new Uint8Array(r)],{type:o})}e.data={},e.data.user={},e.data.user.displayName={firstName:"",middleName:"",lastName:""},e.data.user.picture="",e.data.user.bioSummary="",e.editMode=!1,e.loading=!0,e.imageLoading=!1,e.myImage=null,e.myCroppedImage=null,e.updateProfile=function(){a.updateProfile(e.user).then(function(t){e.user=t.data,i.setUser(e.user),e.removeImage(),r.success("Profile Updated")})["catch"](function(e){r.error(e.data.message,e.status)})},e.saveUser=function(){e.editMode&&(e.user.picture=angular.copy(e.data.user.picture||e.user.picture),e.user.email=angular.copy(e.data.user.email||e.user.email),e.user.bioSummary=angular.copy(e.data.user.bioSummary||e.user.bioSummary),e.updateProfile(),e.editMode=!1)},e.logout=function(){l.path("/logout")},e.startEdit=function(){$("#saveUser").animateCss("slideInDown"),e.editMode=!0},e.cancelEdit=function(){$("#saveUser").animateCss("slideOutUp"),e.data.user=angular.copy(e.user),e.removeImage(),e.editMode=!1},e.checkData=function(e,t){return""==e?"Please enter your "+t+".":"first name"==t&&e.length<3?"Please enter your full first name.":void 0},e.editProfilePicture=function(){u.showModal({templateUrl:"../partials/uploadImageModal.html",controller:"ModalController",inputs:{data:{type:"uploadImageModal",height:500,width:500}}}).then(function(t){t.element.modal(),t.close.then(function(t){"Cancel"==t||e.uploadUserPicture(t)})})},e.uploadUserPicture=function(t){e.imageLoading=!0;var o=g(t);"object"==typeof o?n.uploadUser("image",o).then(function(t){e.user.picture=t.data.data,e.data.user.picture=angular.copy(e.user.picture),e.updateProfile(),e.removeImage()})["catch"](function(t){r.error("There was an error. Review your S3 settings."),e.removeImage()}):(r.error("Please choose an image"),e.removeImage())},e.removeImage=function(){e.myImage=null,e.myCroppedImage=null,e.imageLoading=!1},e.init=function(){m("top-nav"),e.user=JSON.parse(i.getUser()),e.user||l.path("/"),e.data.user=angular.copy(e.user),c(function(){e.loading=!1},300)}()}]),angular.module("MyApp").controller("RequestPasswordResetCtrl",["$scope","UserService","toastr",function(e,t,o){e.data={email:""},e.done=!1,e.submit=function(){t.requestPasswordReset(e.data).then(function(t){o.success("Submit Successful"),e.done=!0})["catch"](function(e){console.log(e),o.error(e.data.message)})}}]),angular.module("MyApp").controller("ResetPasswordCtrl",["$scope","UserService","toastr","$stateParams","$location",function(e,t,o,r,n){e.data={password:""},e.submit=function(){t.resetPassword(r.token,e.data).then(function(e){o.success("Update Password Successful"),n.url("/candidate/signup")})["catch"](function(e){o.error(e.data.message)})}}]),angular.module("MyApp").controller("SignupCtrl",["$scope","$auth","toastr","UserService","$location","$http","localStorage","$state","$anchorScroll","$timeout",function(e,t,o,r,n,a,i,s,l,u){e.user={},e.user.email="",e.user.password="",e.name="",e.firstName="",e.lastName="",e.signupView=!1,e.showVideo=!1,e.signUp=function(){$("#signup").modal("toggle"),e.user.isBusiness=!1,e.user.isValid=!1,e.user.displayName={},e.user.displayName.firstName=e.firstName,e.user.displayName.lastName=e.lastName,t.signup(e.user).then(function(o){t.setToken(o),e.user=o.data,i.setUser(e.user),n.path("/")})["catch"](function(e){o.error(e.data.message)})},e.toggleSignup=function(){e.signupView=!e.signupView},e.login=function(){$("#login").modal("toggle"),t.login(e.user).then(function(){n.path("/portfolio")})["catch"](function(e){o.error(e.data.message)})},e.resetPassword=function(){$("#login").modal("toggle"),u(function(){n.path("/request-password-reset")},100)},e.switchSignUp=function(){$("#login").modal("toggle"),$("#signup").modal("toggle")},e.toggleVideo=function(){e.showVideo=!e.showVideo,e.showVideo?$("#video").animateCss("bounceIn"):$("#video").animateCss("bounceOut")},e.stopVideo=function(){$("#video").animateCss("bounceOut"),e.showVideo=!1},e.init=function(){l("top-nav")}()}]),angular.module("MyApp").controller("StaticCtrl",["$scope","$auth","$http","$timeout","$anchorScroll",function(e,t,o,r,n){e.loading=!0,r(function(){e.loading=!1},200),e.init=function(){n("top-nav")}()}]),angular.module("MyApp").controller("UserPortfolioCtrl",["$scope","$state","$auth","toastr","$stateParams","$http","UserService","localStorage","ModalService","$location","_","$anchorScroll",function(e,t,o,r,n,a,i,s,l,u,c,d){e.userId=n.userId,e.data={},e.data.user={},e.data.user.picture="",e.data.user.displayName={firstName:"",middleName:"",lastName:""},e.data.user.bioSummary="",e.loading=!0,e.init=function(){d("top-nav"),i.getUserProfile(e.userId).then(function(t){e.data.user=t.data,e.loading=!1})["catch"](function(e){r.error(e.data.message,e.status)})}()}]),angular.module("MyApp").controller("ValidateCtrl",["$scope","toastr","$location","vcRecaptchaService","$http","$anchorScroll",function(e,t,o,r,n,a){e.response=null,e.widgetId=null,e.model={key:"6Lehgh4TAAAAAM3Z3zLT3p9Nw31EpO8SJVMBgWAB"},e.setResponse=function(t){e.response=t},e.setWidgetId=function(t){e.widgetId=t},e.cbExpiration=function(){r.reload(e.widgetId),e.response=null},e.submit=function(){n({method:"POST",url:"../api/v1/auth/validate",data:{value:e.response}}).then(function(r){"200"==r.status?(t.success("Validation Success"),o.path("/portfolio")):(t.error("Error in validating."),e.cbExpiration())})},e.init=function(){a("top-nav")}()}]),angular.module("MyApp").directive("imgCroppie",[function(e){return{restrict:"AE",scope:{src:"=",dimensions:"=",type:"@",zoom:"@",mousezoom:"@",update:"=",orientation:"=",ngModel:"="},link:function(e,t,o){e.$watch("scope.dimensions",function(){var o={},r={},n={},a=function(){e.dimensions=e.dimensions||{},e.output_width=e.dimensions.output_width||500,e.output_height=e.dimensions.output_height||500,e.viewport_width=e.dimensions.viewport_width||500,e.viewport_height=e.dimensions.viewport_height||500,e.boundary_width=e.dimensions.boundary_width||600,e.boundary_height=e.dimensions.boundary_height||600,e.orientation=e.orientation||1,e.viewport_width>e.boundary_width&&(e.viewport_width=e.boundary_width),e.viewport_height>e.boundary_height&&(e.viewport_height=e.boundary_height);var t="true"===e.zoom,a="true"===e.mousezoom;o={viewport:{width:e.viewport_width,height:e.viewport_height,type:e.type||"square"},boundary:{width:e.boundary_width,height:e.boundary_height},enableOrientation:!0,backgroundColor:"#FFFFFF",enableZoom:t,mouseWheelZoom:a},r={size:{width:e.output_width,height:e.output_height},type:"canvas",format:"jpeg",backgroundColor:"#FFFFFF",quality:.8},n={url:e.src,orientation:e.orientation}},i=function(){void 0!=e.src&&(a(),l.bind(n),l.result(r).then(function(t){e.$apply(function(){e.ngModel=t})}))};e.$watch("src",function(){i()});var s=window.setInterval(function(){void 0!=e.src&&l.result(r).then(function(t){e.$apply(function(){e.ngModel=t})})},500);e.$on("$destroy",function(e){clearInterval(s)}),a();var l=new Croppie(t[0],o)})}}}]),angular.module("MyApp").factory("localStorage",["$window",function(e){return{setUser:function(t){return e.localStorage&&e.localStorage.setItem("user",JSON.stringify(t)),this},getUser:function(){return e.localStorage&&e.localStorage.getItem("user")},setData:function(t){return e.localStorage&&e.localStorage.setItem("data",JSON.stringify(t)),this},getData:function(){return e.localStorage&&e.localStorage.getItem("user")}}}]),function(){"use strict";var e=angular.module("angularModalService",[]);e.factory("ModalService",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(e,t,o,r,n,a,i,s,l){function u(){var t=this,n=function(e,t){var o=i.defer();return e?o.resolve(e):t?s(t,!0).then(function(e){o.resolve(e)},function(e){o.reject(e)}):o.reject("No template or templateUrl has been specified."),o.promise},u=function(t,o){var r=t.children();return r.length>0?e.enter(o,t,r[r.length-1]):e.enter(o,t)};t.showModal=function(t){var s=i.defer(),d=t.controller;return d?(n(t.template,t.templateUrl).then(function(n){var d=(t.scope||a).$new(),p=i.defer(),m=i.defer(),g={$scope:d,close:function(t,o){void 0!==o&&null!==o||(o=0),l(function(){p.resolve(t),e.leave(h).then(function(){m.resolve(t),d.$destroy(),g.close=null,s=null,p=null,w=null,g=null,h=null,d=null})},o)}};t.inputs&&angular.extend(g,t.inputs);var f=o(n),h=f(d);g.$element=h;var v=d[t.controllerAs],b=r(t.controller,g,!1,t.controllerAs);t.controllerAs&&v&&angular.extend(b,v),t.appendElement?u(t.appendElement,h):u(c,h);var w={controller:b,scope:d,element:h,close:p.promise,closed:m.promise};s.resolve(w)}).then(null,function(e){s.reject(e)}),s.promise):(s.reject("No controller has been specified."),s.promise)}}var c=angular.element(t[0].body);return new u}])}(),angular.module("MyApp").factory("UploadService",["$http",function(e){return{uploadUser:function(t,o){var r=new FormData;return r.append("type",t),r.append("files",o),e({method:"POST",url:"/api/v1/upload/user",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},uploadProject:function(t,o,r){var n=new FormData;return n.append("type",t),n.append("files",o),n.append("project",JSON.stringify(r)),e({method:"POST",url:"/api/v1/upload/project",data:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},uploadSubmission:function(t,o,r){var n=new FormData;return n.append("type",t),n.append("files",o),n.append("submission",JSON.stringify(r)),e({method:"POST",url:"/api/v1/upload/submission",data:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}})},uploadProgram:function(t,o,r){var n=new FormData;return n.append("type",t),n.append("files",o),n.append("program",JSON.stringify(r)),e({method:"POST",url:"/api/v1/upload/program",data:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}}}]),angular.module("MyApp").factory("UserService",["$http",function(e){return{getProfile:function(){return e.get("/api/v1/user/me")},updateProfile:function(t){try{if(t.isBusiness)var o=t.businessInfo.businessName||"",r=t.businessInfo.businessIndustry||"";else var o=t.displayName.firstName||"",r=t.displayName.lastName||"";Smooch.updateUser({givenName:o,surname:r,email:t.email||"",properties:{userId:t._id}})}catch(n){}return e.put("/api/v1/user/me",t)},getAllProfiles:function(){return e.get("/api/v1/user/all")},getIntern:function(t){return e.post("/api/v1/user/suggested",{data:t})},getUserProfile:function(t){return e.get("/api/v1/user/profile/"+t)},requestPasswordReset:function(t){return e.post("/api/v1/user/password-forgot",t)},resetPassword:function(t,o){return e.post("/api/v1/user/reset-password/"+t,o)}}}]),angular.module("MyApp").component("compose",{templateUrl:"/partials/project-components/compose.html",controller:composeController,bindings:{index:"=",project:"=",submission:"="}}),angular.module("MyApp").component("dashboardGridView",{templateUrl:"/partials/dashboard/dashboardGridView.html",controller:dashboardGridViewController,bindings:{program:"="},scope:!0}),angular.module("MyApp").component("dashboardSubmissionView",{templateUrl:"/partials/dashboard/dashboardSubmissionView.html",controller:dashboardSubmissionViewController,bindings:{submission:"="},scope:!0}),angular.module("MyApp").component("programCard",{templateUrl:"/partials/program/programCard.html",controller:programCardController,bindings:{program:"="},scope:!0}),angular.module("MyApp").component("projectCard",{templateUrl:"/partials/project/projectCard.html",controller:projectCardController,bindings:{project:"=",clickable:"="},scope:!0}),angular.module("MyApp").component("projectGridView",{templateUrl:"/partials/project/projectGridView.html",controller:projectGridViewController,bindings:{project:"=",clickable:"="},scope:!0}),angular.module("MyApp").component("header",{templateUrl:"/partials/project-components/header.html",controller:mainController,bindings:{data:"=",index:"="}}).component("text",{templateUrl:"/partials/project-components/text.html",controller:mainController,bindings:{data:"=",index:"="}}).component("richText",{templateUrl:"/partials/project-components/richText.html",controller:mainController,bindings:{data:"=",index:"="}}).component("textInput",{templateUrl:"/partials/project-components/textInput.html",controller:mainController,bindings:{data:"=",index:"="}}).component("richTextInput",{templateUrl:"/partials/project-components/richTextInput.html",controller:mainController,bindings:{data:"=",index:"="}}).component("imageUpload",{
templateUrl:"/partials/project-components/imageUpload.html",controller:mainController,bindings:{data:"=",index:"=",project:"<"}}).component("imageInput",{templateUrl:"/partials/project-components/imageInput.html",controller:mainController,bindings:{data:"=",index:"="}}).component("pdf",{templateUrl:"/partials/project-components/pdf.html",controller:mainController,bindings:{data:"=",index:"="}}).component("pdfInput",{templateUrl:"/partials/project-components/pdfInput.html",controller:mainController,bindings:{data:"=",index:"="}}).component("compose",{templateUrl:"/partials/project-components/compose.html",controller:mainController,bindings:{data:"=",index:"=",project:"<"}}).component("challenge",{templateUrl:"/partials/project-components/challenge.html",controller:mainController,bindings:{data:"=",index:"=",project:"<"}}),angular.module("MyApp").component("submissionGridView",{templateUrl:"/partials/submission/submissionGridView.html",controller:submissionGridViewController,bindings:{submission:"=",clickable:"="},scope:!0}),angular.module("MyApp").component("submissionPopUpView",{templateUrl:"/partials/submission/submissionPopUpView.html",controller:submissionPopUpViewController,bindings:{project:"="},scope:!0}),angular.module("MyApp").component("submissionPortfolioCard",{templateUrl:"/partials/submission/submissionPortfolioCard.html",controller:submissionPortfolioCardController,bindings:{submission:"=",clickable:"=",showpopup:"="}});